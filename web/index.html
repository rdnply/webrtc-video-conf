<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="/web/index.css">
</head>
<body>
<h3> Local Video </h3>
<div id="localCamera">
    <video id="localVideo" autoplay muted></video>
</div>

<h3> Remote Video </h3>
<div id="remoteCameras"></div>

</body>
<script>
    document.getElementById('localCamera').style.top = window.innerHeight - localCamera.offsetHeight + 'px';
</script>
<script src="web/webrtc.js"></script>
<script src="web/control_cameras.js"></script>
<script src="web/move_camera.js"></script>
<script>
    var url = "{{.}}";

    navigator.mediaDevices.getUserMedia({video: true})
        .then(stream => {
            let pc = new RTCPeerConnection()
            pc.ontrack = function (event) {
                if (event.track.kind === 'audio') {
                    return
                }

                addCamera(event)
            }

            document.getElementById('localVideo').srcObject = stream
            stream.getTracks().forEach(track => pc.addTrack(track, stream))

            processWebRTC(pc, url)

            window.onresize = dish;
        }).catch(window.alert)
</script>
<script src="web/resize.js"></script>
</html>
